<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Karishma AI: Universal</title>

<style>
:root {
  --robot-main:#ff4081;
  --chat-bg:#ffffff;
  --sky-day:linear-gradient(180deg,#4facfe,#00f2fe);
  --sky-night:linear-gradient(180deg,#0f2027,#203a43,#2c5364);
}
*{box-sizing:border-box}
body{
  margin:0;height:100vh;display:flex;
  font-family:Segoe UI,sans-serif;
}
#visual-area{
  flex:1;position:relative;
  background:var(--sky-day);
  transition:1s;
}
#visual-area.night{background:var(--sky-night)}
#chat-area{
  width:380px;background:#fff;
  display:flex;flex-direction:column;
  border-left:1px solid #ddd;
}
@media(max-width:800px){
  body{flex-direction:column}
  #visual-area{height:55%}
  #chat-area{width:100%}
}
.robot{
  position:absolute;bottom:15%;
  left:50%;transform:translateX(-50%);
  font-size:80px;cursor:pointer;
  animation:float 4s infinite;
}
@keyframes float{
  0%,100%{transform:translate(-50%,0)}
  50%{transform:translate(-50%,-10px)}
}
.chat-header{
  padding:15px;font-weight:bold;
  border-bottom:1px solid #eee;
  display:flex;justify-content:space-between;
}
.status{font-size:12px}
.chat{
  flex:1;overflow:auto;padding:15px;
  display:flex;flex-direction:column;gap:10px;
}
.msg{
  max-width:80%;padding:10px 14px;
  border-radius:16px;font-size:14px;
}
.user{align-self:flex-end;background:#ff4081;color:#fff}
.bot{align-self:flex-start;background:#f5f5f5}
.input{
  display:flex;padding:10px;border-top:1px solid #eee;
}
input{
  flex:1;padding:10px;border-radius:20px;
  border:1px solid #ddd;
}
button{
  margin-left:8px;border:none;
  width:42px;height:42px;
  border-radius:50%;
  background:#ff4081;color:#fff;
  font-size:18px;cursor:pointer;
}
</style>
</head>

<body>

<div id="visual-area">
  <div class="robot" onclick="interact()">ü§ñüéÄ</div>
</div>

<div id="chat-area">
  <div class="chat-header">
    Karishma AI
    <span class="status" id="status">‚óè Ready</span>
  </div>
  <div class="chat" id="chat"></div>
  <div class="input">
    <input id="inp" placeholder="Say hi‚Ä¶" 
      onkeypress="if(event.key==='Enter')send()">
    <button onclick="send()">‚û§</button>
  </div>
</div>

<script>
/* üîë PUT YOUR KEY HERE */
const GEMINI_API_KEY = "AIzaSyAmUMlyBICc9OkP5Y_Nzkt1JzkryVgdQw4";
const MODEL = "gemini-1.5-flash";

const SYSTEM_PROMPT =
"You are Karishma AI, a cute playful robot girl. Replies under 20 words. Use emojis. Love Abhik.";

let history = [];

const chat = document.getElementById("chat");
const status = document.getElementById("status");

function addMsg(text, cls){
  const d = document.createElement("div");
  d.className = "msg " + cls;
  d.textContent = text;
  chat.appendChild(d);
  chat.scrollTop = chat.scrollHeight;
}

window.onload = () => {
  addMsg("Namaste! I‚Äôm Karishma üéÄü§ñ", "bot");
  if(new Date().getHours() >= 18){
    document.getElementById("visual-area").classList.add("night");
  }
};

function interact(){
  callAI("User interacted cutely with you.");
}

function send(){
  const i = document.getElementById("inp");
  const text = i.value.trim();
  if(!text) return;
  i.value="";
  addMsg(text,"user");
  callAI(text);
}

async function callAI(text){
  status.textContent="Thinking‚Ä¶";

  const payload = {
    contents:[
      {role:"user", parts:[{text:SYSTEM_PROMPT}]},
      ...history,
      {role:"user", parts:[{text:text}]}
    ]
  };

  try{
    const res = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${GEMINI_API_KEY}`,
      {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify(payload)
      }
    );

    const data = await res.json();
    const reply = data.candidates?.[0]?.content?.parts?.[0]?.text;

    if(!reply) throw "No reply";

    addMsg(reply,"bot");
    history.push({role:"model",parts:[{text:reply}]});
    status.textContent="‚óè Live";

  }catch(e){
    console.error(e);
    status.textContent="Error";
    addMsg("‚ö†Ô∏è Connection failed","bot");
  }
}
</script>

</body>
</html>
